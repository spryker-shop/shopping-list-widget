{% extends template('page-layout-main') %}

{% define data = {
    shoppingListCollection: _widget.shoppingListCollection,
    sku: _widget.sku,
    disabled: _widget.disabled,
    maxQuantity: 10
} %}

{% set options = [] %}

{% for index in 1..data.maxQuantity %}
    {% set options = options | merge([{
        label: index,
        value: index
    }]) %}
{% endfor %}

{% block body %}
    <form class="grid grid--justify grid--bottom" method="POST" action="/shopping-list/add-item">
        <div class="col col--sm-5">
            <label>
                {{ 'product.quantity' | trans }}
                {% include atom('select') with {
                    modifiers: ['expand'],
                    attributes: {
                        name: 'quantity'
                    },
                    data: {
                        options: options
                    }
                } only %}
            </label>
            {% if data.shoppingListCollection.shoppingLists|length %}
                <select name="shoppingListName">
                    {% for shoppingList in data.shoppingListCollection.shoppingLists %}
                        <option value="{{ shoppingList.name }}">{{ shoppingList.name }}</option>
                    {% endfor %}
                </select>
            {% endif %}
        </div>

        <div class="col col--sm-6">
            <input type="hidden" name="sku" value="{{ data.sku }}" />
            <button type="submit" class="button button--expand" {{ data.disabled ? 'disabled' : '' }}
                    onclick="this.form.submit(); this.disabled='disabled'; return false;" {{ qa('add-to-shopping-list-button') }}">
            {% include atom('icon') with {
                data: {
                    name: 'cart-plus'
                }
            } only %}
            {{ 'page.detail.add-to-shopping-list' | trans }}
            </button>
        </div>
    </form>
{% endblock %}
